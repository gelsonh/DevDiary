@using Microsoft.AspNetCore.Identity;
@inject UserManager<AppUser> UserManager

@{
    AppUser? appUser = await UserManager.GetUserAsync(User);
    // Get the current date
    DateTime currentDate = DateTime.Now;

    // Pass the date to ViewBag
    ViewBag.CurrentDate = currentDate;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - DevDiary</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" href="~/favicon.ico" type="image/x-icon">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="~/assets/css/vendor/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css">
    <link rel="stylesheet" href="~/assets/css/vendor/base.css">
    <link rel="stylesheet" href="~/assets/css/plugins/plugins.css">
    <link rel="stylesheet" href="~/assets/css/style.css">
    <link rel="stylesheet" href="~/css/site.css">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">


    <!-- Place the first <script> tag in your HTML's <head> -->
    <script src="https://cdn.tiny.cloud/1/a933nl83li70ug76y63fi222mhbbgclw6xmvhkujm7n9f8ue/tinymce/7/tinymce.min.js"
        referrerpolicy="origin"></script>




</head>

<body>


    <partial name="_LogoutPartial" />

    <div class="main-wrapper">
        <div class="mouse-cursor cursor-outer"></div>
        <div class="mouse-cursor cursor-inner"></div>

        <div id="my_switcher" class="my_switcher">
            <ul>
                <li>
                    <a href="javascript: void(0);" data-theme="light" class="setColor light">
                        <span title="Light Mode">Light</span>
                    </a>
                </li>
                <li>
                    <a href="javascript: void(0);" data-theme="dark" class="setColor dark">
                        <span title="Dark Mode">Dark</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Start Header -->
        <header class="header axil-header header-style-6  header-light header-sticky ">
            <div class="header-top">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-6 col-sm-6 col-xl-4">
                        <ul class="social-icon color-white md-size justify-content-center justify-content-sm-start">

                            <li><a href="https://www.facebook.com/gelsonhs"><i class="fab fa-facebook-f"></i></a></li>
                            <li><a href="https://www.instagram.com/gelsonhz/"><i class="fab fa-instagram"></i></a></li>
                            <li><a href="https://twitter.com/gelsonhz"><i class="fab fa-twitter"></i></a></li>
                            <li><a href="https://www.linkedin.com/in/gelson-hernandez/"><i
                                        class="fab fa-linkedin-in"></i></a></li>
                            <li><a href="https://github.com/gelsonh"><i class="fab fa-github"></i></a></li>

                        </ul>
                    </div>


                    <div class="col-lg-2 col-md-6 col-sm-6 col-xl-4">
                        <div class="logo text-center">
                            <a href="~/BlogPosts/Index">
                                <img class="dark-logo mx-3" src="~/assets/images/logo/DevDiary.png" alt="Blogar logo"
                                    style=" transform: scale(3);">
                                <img class="light-logo mx-3" src="~/assets/images/logo/DevDiaryBlackMode.png"
                                    alt="Blogar logo" style="transform: scale(3);">
                            </a>
                        </div>
                    </div>

                    <div class="col-lg-7 col-md-12 col-sm-12 col-xl-4">
                        <div
                            class="header-top-bar d-flex justify-content-center justify-content-lg-end flex-wrap align-items-center">
                            <ul class="header-top-date liststyle d-flex flrx-wrap align-items-center mr--20">
                                <li><a href="#">@ViewBag.CurrentDate.ToString("MMM dd, yyyy")</a></li>
                            </ul>
                            <ul class="header-top-nav liststyle d-flex flrx-wrap align-items-center">
                                <li>
                                    <a asp-controller="BlogPosts" asp-action="AboutMe">About</a>
                                </li>
                                <li><a asp-action="ContactMe" asp-controller="Home">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="header-bottom">
                <div class="row justify-content-between align-items-center">
                    <div class="col-xl-7 col-12">
                        <div class="mainmenu-wrapper d-none d-xl-block">
                            <nav class="mainmenu-nav">
                                <!-- Start Mainmanu Nav -->
                                <ul class="mainmenu">

                                    <li>
                                        <a asp-controller="BlogPosts" asp-action="Index">Home</a>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">Posts</a>
                                        <ul class="axil-submenu">
                                            <li>
                                                <a class="hover-flip-item-wrapper" asp-action="Index"
                                                    asp-controller="BlogPosts">
                                                    <span class="hover-flip-item">
                                                        <span data-text="Recent Posts">Recent Posts</span>
                                                    </span>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="hover-flip-item-wrapper" asp-action="Popular"
                                                    asp-controller="BlogPosts">
                                                    <span class="hover-flip-item">
                                                        <span data-text="Popular Posts"> Popular Posts</span>
                                                    </span>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>

                                    @if (User.Identity?.IsAuthenticated == true)
                                    {
                                        <li><a asp-controller="BlogPosts" asp-action="Favorites">Favorites</a></li>
                                    }

                                    <!-- End Post List Wrapper  -->
                                    @if (User.IsInRole("Admin"))
                                    {
                                        <li class="menu-item-has-children">
                                            <a href="#">Author</a>
                                            <ul class="axil-submenu">
                                                <li>
                                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts"
                                                        asp-action="Index">
                                                        <span class="">
                                                            <span>Admin</span>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="hover-flip-item-wrapper" href="~/swagger">
                                                        <span class="">
                                                            <span>APIs</span>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts"
                                                        asp-action="Create">
                                                        <span class="">
                                                            <span>Add New Post</span>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts"
                                                        asp-action="AuthorArea">
                                                        <span class="hover-flip-item">
                                                            <span data-text="Manage Posts">Manage Posts</span>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="hover-flip-item-wrapper" asp-controller="Categories"
                                                        asp-action="Index">
                                                        <span class="hover-flip-item">
                                                            <span data-text="Manage Categories">Manage Categories</span>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="hover-flip-item-wrapper" asp-controller="Tags"
                                                        asp-action="Index">
                                                        <span class="hover-flip-item">
                                                            <span data-text="Manage Tags">Manage Tags</span>
                                                        </span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>

                                    }

                                </ul>
                                <!-- End Mainmanu Nav -->
                            </nav>
                        </div>
                    </div>
                    <div class="col-xl-5 col-12">
                        <div
                            class="header-search d-flex flex-wrap align-items-center justify-content-center justify-content-xl-end">
                            <form asp-action="SearchIndex" asp-controller="BlogPosts"
                                class="header-search-form d-sm-block d-none">
                                <div class="axil-search form-group">
                                    <button type="submit" class="search-button"><i class="fal fa-search"></i></button>
                                    <input type="text" class="form-control" placeholder="Search" name="searchString">
                                </div>
                            </form>
                            <div class="mobile-search-wrapper d-sm-none d-block">
                                <button class="search-button-toggle"><i class="fal fa-search"></i></button>
                                <form asp-action="SearchIndex" asp-controller="BlogPosts" class="header-search-form">
                                    <div class="axil-search form-group">
                                        <button type="submit" class="search-button"><i
                                                class="fal fa-search"></i></button>
                                        <input type="text" class="form-control" placeholder="Search"
                                            name="searchString">
                                    </div>
                                </form>
                            </div>

                            <ul class="metabar-block">

                                <li class="nav-item dropdown has-arrow main-drop">
                                    <a href="#" class="dropdown-toggle nav-link" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <span class="user-img">
                                            <img src="" alt="">
                                            <span class="status online"></span>
                                        </span>
                                        <span>@appUser?.FullName</span>
                                    </a>

                                    @if (User.Identity!.IsAuthenticated)
                                    {
                                        <div class="dropdown-menu animate__slideInDown">
                                            <a class="dropdown-item" asp-area="Identity" asp-page="/Account/Manage/Index">
                                                <p style="color:black">My Profile</p>
                                            </a>
                                            <a class="dropdown-item"
                                                href="javascript:document.getElementById('logoutForm').submit();">
                                                <p style="color:black">Logout</p>
                                            </a>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="dropdown-menu animate__slideInDown">
                                            <a class="dropdown-item" asp-area="Identity" asp-page="/Account/Login">
                                                <p style="color:black">Sign In</p>
                                            </a>
                                            <a class="dropdown-item" asp-area="Identity" asp-page="/Account/Register">
                                                <p style="color:black">Register</p>
                                            </a>
                                        </div>
                                    }
                                </li>
                            </ul>
                            <!-- Start Hamburger Menu  -->
                            <div class="hamburger-menu d-block d-xl-none">
                                <div class="hamburger-inner">
                                    <div class="icon"><i class="fal fa-bars"></i></div>
                                </div>
                            </div>
                            <!-- End Hamburger Menu  -->
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- END Header -->
        <!-- Start Mobile Menu Area  -->
        <div class="popup-mobilemenu-area">
            <div class="inner">

                <div class="mobile-menu-top">
                    <div class="logo">
                        <a href="~/BlogPosts/Index">
                            <img class="dark-logo mx-3" src="~/assets/images/logo/DevDiary.png" alt="Blogar logo"
                                style="transform: scale(2);">
                            <img class="light-logo mx-3" src="~/assets/images/logo/DevDiaryBlackMode.png"
                                alt="Blogar logo" style="transform: scale(2);">
                        </a>
                    </div>
                    <div class="mobile-close">
                        <div class="icon">
                            <i class="fal fa-times"></i>
                        </div>
                    </div>
                </div>

                <!-- Start Mainmanu Nav -->
                <ul class="mainmenu">
                    <li>
                        <a asp-controller="BlogPosts" asp-action="Index">Home</a>
                    </li>
                    <li>
                        <a asp-controller="BlogPosts" asp-action="AboutMe">About</a>
                    </li>
                    <li class="menu-item-has-children">
                        <a href="#">Posts</a>
                        <ul class="axil-submenu">
                            <li>
                                <a class="hover-flip-item-wrapper" asp-action="Index" asp-controller="BlogPosts">
                                    Recent Posts
                                </a>
                            </li>
                            <li>
                                <a class="hover-flip-item-wrapper" asp-action="Popular" asp-controller="BlogPosts">
                                    Popular Posts
                                </a>
                            </li>
                        </ul>
                    </li>


                    <li><a asp-action="ContactMe" asp-controller="Home">Contact</a></li>
                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        <li><a asp-controller="BlogPosts" asp-action="Favorites">Favorites</a></li>
                    }

                    <!-- End Post List Wrapper  -->
                    @if (User.IsInRole("Admin"))
                    {
                        <li class="menu-item-has-children">
                            <a href="#">Author</a>
                            <ul class="axil-submenu">
                                <li>
                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts" asp-action="Index">

                                        <span>Admin</span>

                                    </a>
                                </li>
                                <li>
                                    <a class="hover-flip-item-wrapper" href="~/swagger">

                                        APIs

                                    </a>
                                </li>
                                <li>
                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts" asp-action="Create">

                                        <span>Add New Post</span>

                                    </a>
                                </li>
                                <li>
                                    <a class="hover-flip-item-wrapper" asp-controller="BlogPosts" asp-action="AuthorArea">

                                        <span data-text="Manage Posts">Manage Posts</span>

                                    </a>
                                </li>
                                <li>
                                    <a class="hover-flip-item-wrapper" asp-controller="Categories" asp-action="Index">

                                        <span data-text="Manage Categories">Manage Categories</span>

                                    </a>
                                </li>
                                <li>
                                    <a class="hover-flip-item-wrapper" asp-controller="Tags" asp-action="Index">

                                        <span data-text="Manage Tags">Manage Tags</span>

                                    </a>
                                </li>
                            </ul>
                        </li>

                    }
                </ul>

            </div>
        </div>
        <!-- End Mobile Menu Area  -->
        @RenderBody()


        <!-- Start Footer Area  -->
        <div class="axil-footer-area axil-footer-style-1 footer-variation-2">

            <!-- Start Footer Top Area  -->
            <div class="footer-top">
                <div class="container">
                    <div class="row">

                        <div class="col-lg-4 col-md-4">
                            <div class="logo">
                                <a href="~/BlogPosts/Index">
                                    <img class="dark-logo mx-3" src="~/assets/images/logo/DevDiary.png"
                                        alt="Blogar logo" style="transform: scale(3);">
                                    <img class="white-logo mx-3" src="~/assets/images/logo/DevDiaryBlackMode.png"
                                        alt="Blogar logo" style="transform: scale(3);">
                                </a>
                            </div>
                        </div>

                        <div class="col-lg-8 col-md-8">
                            <!-- Start Post List  -->
                            <div
                                class="d-flex justify-content-start mt_sm--15 justify-content-md-end align-items-center flex-wrap">
                                <h5 class="follow-title mb--0 mr--20">Follow Me</h5>
                                <ul class="social-icon color-tertiary md-size justify-content-start">

                                    <li><a href="https://www.facebook.com/gelsonhs"><i
                                                class="fab fa-facebook-f"></i></a></li>
                                    <li><a href="https://www.instagram.com/gelsonhz/"><i
                                                class="fab fa-instagram"></i></a></li>
                                    <li><a href="https://twitter.com/gelsonhz"><i class="fab fa-twitter"></i></a></li>
                                    <li><a href="https://www.linkedin.com/in/gelson-hernandez/"><i
                                                class="fab fa-linkedin-in"></i></a></li>
                                    <li><a href="https://github.com/gelsonh"><i class="fab fa-github"></i></a></li>

                                </ul>
                            </div>
                            <!-- End Post List  -->
                        </div>

                    </div>
                </div>
            </div>
            <!-- End Footer Top Area  -->
            <!-- Start Copyright Area  -->
            <div class="copyright-area">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-9 col-md-8">
                            <div class="copyright-left">
                                <ul class="mainmenu justify-content-start">

                                    <li>
                                        <a class="hover-flip-item-wrapper" asp-controller="BlogPosts"
                                            asp-action="AboutMe">
                                            <span class="hover-flip-item">
                                                <span data-text="About">About</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="hover-flip-item-wrapper" asp-action="ContactMe" asp-controller="Home">
                                            <span class="hover-flip-item">
                                                <span data-text="Contact">Contact</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="hover-flip-item-wrapper" href="https://gelsonportfolio.netlify.app/">
                                            <span class="hover-flip-item">
                                                <span data-text="Portfolio">Portfolio</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="hover-flip-item-wrapper"
                                            href="https://bugtrackingsystem.up.railway.app/">
                                            <span class="hover-flip-item">
                                                <span data-text="Bug Tracking System">Bug Tracking System</span>
                                            </span>
                                        </a>
                                    </li>


                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-4">
                            <div class="copyright-right text-start text-md-end mt_sm--20">
                                <p class="b3">Dev Diary © 2024</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Copyright Area  -->
        </div>
        <!-- End Footer Area  -->
        <!-- Start Back To Top  -->
        <a id="backto-top"></a>
        <!-- End Back To Top  -->

    </div>

    <!-- jQuery JS  -->
    <script src="~/assets/js/vendor/jquery.js"></script>

    <!-- Modernizer JS -->
    <script src="~/assets/js/vendor/modernizr.min.js"></script>

    <!-- Sweet Alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Slick JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <!-- TweenMax JS -->
    <script src="~/assets/js/vendor/tweenmax.min.js"></script>

    <!-- js.cookie -->
    <script src="~/assets/js/vendor/js.cookie.js"></script>

    <!-- jQuery Style Switcher -->
    <script src="~/assets/js/vendor/jquery.style.switcher.js"></script>

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/5f740f3843.js" crossorigin="anonymous"></script>

    <!-- Prism (if you need it) -->
    <!-- <script async src="~/dist/libs/prismjs/prism.js"></script> -->
    <!-- Main JS (load deferred) -->
    <script defer src="~/assets/js/main.js"></script>


    <script>
        // Espera a que se cargue jQuery antes de ejecutar el código dependiente
        document.addEventListener('DOMContentLoaded', function () {
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
        });
    </script>

    <!-- Place the following <script> and <textarea> tags your HTML's <body> -->
    <script>
        tinymce.init({
            selector: 'textarea',
            plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed linkchecker a11ychecker tinymcespellchecker permanentpen powerpaste advtable advcode editimage advtemplate ai mentions tinycomments tableofcontents footnotes mergetags autocorrect typography inlinecss markdown',
            toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
            tinycomments_mode: 'embedded',
            tinycomments_author: 'Author name',
            mergetags_list: [
                { value: 'First.Name', title: 'First Name' },
                { value: 'Email', title: 'Email' },
            ],
            ai_request: (request, respondWith) => respondWith.string(() => Promise.reject("See docs to implement AI Assistant")),
        });
    </script>
    @section scripts {

        <script>
            let message = '@(ViewBag.SwalMessage)';
            if (!message.includes("Error") && message != '') {
                Swal.fire({
                    backdrop: false,
                    icon: 'success',
                    title: message,
                    showConfirmButton: true
                });
            } else if (message.includes("Error")) {
                Swal.fire({
                    backdrop: false,
                    icon: 'error',
                    title: 'Oops...',
                    text: message
                });
            }
        </script>

        <!--End Sweet Alerts-->


    }


    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
